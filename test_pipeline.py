# Import necessary modules and functions
import pandas as pd
import nltk
import joblib
from sklearn.feature_extraction.text import CountVectorizer
from sklearn.decomposition import TruncatedSVD
from sklearn.feature_extraction.text import TfidfTransformer
import numpy as np

# Import your functions
from main import pipeline

# Load necessary models and vectorizers
model = joblib.load('NBmodel.pkl')
vectorizer = joblib.load('tfidf_vectorizer.pkl')

# Define a test input
test_data = {
    "data": "What do we need?.\nUnited Bank for Africa will be known as the “controller” and “processor” of the personal data you provide to us. We will only collect basic personal data from you, which will include Name, Address; Nationality; Email, Phone number, ID Number, Bank Verification Number (BVN) and any other information as may be mandated by the regulatory requirements of the respective countries and their applicable central bank requirement. We will NEVER ask for personal banking information such as card details (CVV); PIN, Password; Secure Passcode; or Token number.\n\nWhat do we do with it?.\nTo enable you to obtain banking services through us, we will require you to collect, store and process some of your personal data as required under the law. Your consent is required to make banking services available to you in accordance with the law/regulation in force.\nAll the personal data that the Bank collects from you will be held and processed from our Facilities at Lagos Headquarters or any of our subsidiaries and/or authorised service providers (third parties) where applicable in a secure manner. Unless required by a Legal or regulatory requirement for the Banking services, your data will be held confidential. We will take all reasonable actions to ensure that the personal data of all customers and employees are handled securely and in a controlled manner. The Bank complies with the latest Information security standards such as PCI-DSS, ISO/IEC 27001:2013 etc.\n\nHow long do we keep it?.\nAs a regulated financial services institution, we will retain your personal data for ten (10) years or as may be required by regulation in the country under consideration, after which it will be disposed of as required under the respective Government laws and Banking regulations. Please note that regulations may require the Bank to retain your personal data for a specified period, even after your banking relationship with us ends.\n\nUse or Sharing of Personal Data.\nAll personal data collected will be processed from our Facilities at Lagos Headquarters or any of our subsidiaries and may be shared with Third parties and Service providers to complete the service to the customers in line with Nigeria Data Protection Regulation (NDPR), General Data Protection Regulation (GDPR) and any applicable Data Protection Laws.\nIn addition, we may disclose your personal data:\nIf we are required to do so by law or legal process;\nTo law enforcement authorities or other government officials;\nWhen we believe disclosure is necessary or appropriate to prevent physical harm or financial loss or in connection with an investigation of suspected or actual illegal activity;\nIf disclosure is necessary to protect the vital interests of a person;\nTo enforce our Terms and Conditions;\nTo protect our property, services and legal rights;\nTo support auditing, compliance, and corporate governance functions; or\nTo comply with any applicable laws.\nData Security\nAt UBA, security is our top priority, and we always strive to ensure that your personal data shall be protected against unauthorised or accidental access. We maintain this commitment to data security by implementing appropriate physical, electronic and managerial measures to safeguard and secure your personal data with us.\nOur web servers are protected behind \"firewalls\", and our systems are monitored to prevent unauthorised access. We will not send personal information to you by ordinary email. As the security of ordinary email cannot be guaranteed, you should only send emails to us using the secure email facility on our website.\nAll practical steps shall be taken to ensure that personal data will not be kept longer than necessary and that the Bank will comply with all statutory and regulatory requirements concerning the retention of personally identifiable information.\nOur commitment to Data Security is paramount to us at UBA. Your personally identifiable information is kept secure in line with applicable Data Protection Regulations. Only authorised members of staff, agents and contractors (who have agreed to keep information secure and confidential) have access to this information.\nSecurity Assurance\nUBA and its customers shall play an important role in protecting against online fraud. You should be careful that your bank account details, including your User ID and Password, are not compromised by ensuring that you do not knowingly or accidentally share, provide or facilitate unauthorised use of it. Please do not share your User ID and password or allow access or use of it by others. UBA endeavours to put in place high standards of security to protect your interests.\nYou should safeguard your unique User ID and Password by keeping them secret and confidential. Never write them down or share these details with anyone. If you think your User ID and password have been disclosed to a third party, are lost or stolen, and unauthorised transactions may have been conducted, you are responsible for informing us immediately.\nRemedies for personal data violation\nIf your personal data is violated at any given time, you are at liberty to contact the Data Protection Officer (DPO) of the bank at dataprotectionoffice@ubagroup.com\nWithin a reasonable timeframe of UBA receiving a complaint, UBA shall notify the Individual in line with data privacy requirements of either,\n(i) UBA’s position with regard to the complaint and any action UBA has taken or will take in response; or,\n(ii) when the individual will be informed of UBA’s position, which date shall be in line with data privacy requirements.\nRemedies shall include but are not limited to investigating and reporting to appropriate authorities, recovering the personal data, correcting it and enhancing controls around it.\nCross Border Transfer\nGiven the scope of our banking operations, we process data inside and outside Nigeria and rely on legally-provided mechanisms to lawfully transfer data across borders. Countries where we process data may have laws different from, and potentially not as protective as, the laws of Nigeria and the EU.\nUBA shall not transfer your personal data to a foreign country or international organisation in contravention of Nigeria Data Protection Regulation, General Data Protection Regulation and other applicable Data Protection Laws.\nPlease click here to express your consent to allow us to collect and use your personal data to continue providing you with banking services.\nPlease contact us if you want to know more about our Data Privacy policy and withdraw some or all of your consent. We will be more than glad to help you in accordance with the regulations.\nData Retention\nAs a regulated financial services institution, we will retain your personal data for ten (10) years or as may be required by regulation in the country under consideration, after which it will be disposed of as required under the respective Government laws and Banking regulations. Please note that regulations may require the Bank to retain your personal data for a specified period, even after your banking relationship with us ends.\n\nYour obligations.\nWhere you share personal data of third parties with us, including your directors, officers and authorised signatories (Data Subjects), you are responsible for and warrant that you shall obtain their written consent for the processing and transfer of their personal data for the purpose of your contract with us and the provision of banking services to you."
}

# Call the pipeline function
result = pipeline(test_data['data'])

# Print the result
print(result)
